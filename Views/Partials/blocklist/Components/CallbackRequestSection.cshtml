@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockListItem>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@using Umbraco.Extensions;

@{
    var content = (ContentModels.CallbackRequestSection)Model.Content;

    var eyebrow = !string.IsNullOrWhiteSpace(content.CallbackEyebrow)
        ? content.CallbackEyebrow
        : "Request a call back";

    var heading = content.CallbackHeading?.ToHtmlString();

    var copy = !string.IsNullOrWhiteSpace(content.CallbackCopy)
        ? content.CallbackCopy
        : "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas consectetur, ligula semper sagittis lobortis, eros metus efficitur purus.";

    var submitLabel = !string.IsNullOrWhiteSpace(content.AllbackSubmitLabel)
        ? content.AllbackSubmitLabel
        : "Submit";

    var backgroundImage = content.CallbackBackgroundImage;
    var backgroundImageUrl = backgroundImage?.GetCropUrl(width: 1920) ?? backgroundImage?.Url();
    var sectionInlineStyles = backgroundImageUrl != null
        ? $"background-image: url('{backgroundImageUrl}'); background-size: cover; background-position: center;"
        : null;

    var currentPageUrl = Context.Request.Path + Context.Request.QueryString;
}

<section class="relative overflow-visible pt-24 md:pt-28 pb-40 px-6 md:px-10 bg-neutral" @(sectionInlineStyles != null ? Html.Raw($"style=\"{sectionInlineStyles}\"") : null)>
    @if (!string.IsNullOrWhiteSpace(backgroundImageUrl))
    {
        <img src="@backgroundImageUrl"
             alt=""
             class="absolute left-0 right-0 top-[-80px] w-full bg-neutral -z-20"
             style="height: calc(100% - 170px); object-fit: cover;" />
    }

    <div class="absolute inset-0 bg-neutral/85 backdrop-blur-[2px] -z-10"></div>

    <div class="relative z-20 max-w-5xl mx-auto flex justify-center" style="transform: translateY(210px); margin-bottom: -55px;">
        <div class="w-full bg-neutral rounded-[24px] shadow-[0_50px_100px_rgba(31,41,55,0.12)] px-6 sm:px-12 lg:px-16 py-12 md:py-16 flex flex-col gap-12">
            <div class="text-center flex flex-col items-center gap-6">
                <div class="flex flex-col gap-4">
                    @if (!string.IsNullOrWhiteSpace(heading))
                    {
                        <div class="text-3xl md:text-[2.75rem] font-bold leading-tight text-[#4f5955]">
                            @Html.Raw(heading)
                        </div>
                    }
                    else
                    {
                        <h2 class="text-3xl md:text-[2.75rem] font-bold leading-tight text-[#4f5955]">
                            Let us know about your next project
                        </h2>
                    }
                </div>

                <p class="text-base leading-7 text-[#6b716e] max-w-2xl">@copy</p>
            </div>

            <div>
                <form action="/umbraco/surface/Form/HandleCallbackForm?returnUrl=@Uri.EscapeDataString(currentPageUrl)" method="post" id="callbackRequestForm">
                    @Html.AntiForgeryToken()

                    <div asp-validation-summary="ModelOnly" class="mb-3 text-sm text-red-600"></div>

                    <div class="flex flex-col gap-6 md:flex-row md:flex-nowrap md:items-start md:gap-10">
                        <div class="w-full md:w-1/2 flex flex-col gap-6">
                            <div class="flex flex-col">
                                <label for="callback-name" class="sr-only">Name</label>
                                <input id="callback-name"
                                       name="Name"
                                       type="text"
                                       placeholder="Name"
                                       class="w-full rounded-xl border border-[#e1e5e4] px-5 py-4 italic text-[0.95rem] text-[#3e443f] placeholder:text-[#9ea4a1] focus:outline-none focus:border-[#4f5955] focus:ring-4 focus:ring-[#4f5955]/15" />
                                <span class="field-validation-valid text-sm text-red-600 mt-1" data-valmsg-for="Name" data-valmsg-replace="true"></span>
                            </div>

                            <div class="flex flex-col">
                                <label for="callback-email" class="sr-only">Email address</label>
                                <input id="callback-email"
                                       name="Email"
                                       type="email"
                                       placeholder="Email address"
                                       class="w-full rounded-xl border border-[#e1e5e4] px-5 py-4 italic text-[0.95rem] text-[#3e443f] placeholder:text-[#9ea4a1] focus:outline-none focus:border-[#4f5955] focus:ring-4 focus:ring-[#4f5955]/15" />
                                <span class="field-validation-valid text-sm text-red-600 mt-1" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="w-full md:w-1/2 flex flex-col gap-6">
                            <div class="flex flex-col">
                                <label for="callback-phone" class="sr-only">Phone</label>
                                <input id="callback-phone"
                                       name="Phone"
                                       type="text"
                                       placeholder="Phone"
                                       class="w-full rounded-xl border border-[#e1e5e4] px-5 py-4 italic text-[0.95rem] text-[#3e443f] placeholder:text-[#9ea4a1] focus:outline-none focus:border-[#4f5955] focus:ring-4 focus:ring-[#4f5955]/15" />
                                <span class="field-validation-valid text-sm text-red-600 mt-1" data-valmsg-for="Phone" data-valmsg-replace="true"></span>
                            </div>

                            <div class="flex flex-col">
                                <label for="callback-option" class="sr-only">Service interest</label>
                                <div class="relative">
                                    <select id="callback-option"
                                            name="SelectedOption"
                                            class="w-full appearance-none rounded-xl border border-[#e1e5e4] px-5 py-4 pr-12 italic text-[0.95rem] text-[#3e443f] placeholder:text-[#9ea4a1] focus:outline-none focus:border-[#4f5955] focus:ring-4 focus:ring-[#4f5955]/15 cursor-pointer">
                                        <option value="">Financial consulting</option>
                                        <option value="Business">Business</option>
                                        <option value="Tax planning">Tax planning</option>
                                    </select>
                                    <span class="pointer-events-none absolute inset-y-0 right-4 flex items-center" aria-hidden="true">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24">
                                            <path d="m6 9 6 6 6-6" stroke="#3E443F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </span>
                                </div>
                                <span class="field-validation-valid text-sm text-red-600 mt-1" data-valmsg-for="SelectedOption" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-9 flex justify-center">
                        <button type="submit" class="inline-flex min-w-[160px] items-center justify-center rounded-xl bg-[#4f5955] px-10 py-4 text-base font-semibold text-white transition hover:-translate-y-px hover:bg-[#434c49] hover:shadow-[0_18px_40px_rgba(79,89,85,0.25)] focus:outline-none focus-visible:ring-4 focus-visible:ring-[#4f5955]/30 active:translate-y-0 active:shadow-[0_10px_28px_rgba(79,89,85,0.2)]">
                            @submitLabel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
